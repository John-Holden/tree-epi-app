{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n*/\n\"use strict\";\n\nvar _classCallCheck = require(\"/home/john/tree-epidemic-sim-front-end/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/home/john/tree-epidemic-sim-front-end/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _inherits = require(\"/home/john/tree-epidemic-sim-front-end/node_modules/@babel/runtime/helpers/inherits.js\").default;\n\nvar _createSuper = require(\"/home/john/tree-epidemic-sim-front-end/node_modules/@babel/runtime/helpers/createSuper.js\").default;\n\nvar _require = require(\"tapable\"),\n    SyncWaterfallHook = _require.SyncWaterfallHook;\n\nvar Compilation = require(\"../Compilation\");\n\nvar RuntimeGlobals = require(\"../RuntimeGlobals\");\n\nvar Template = require(\"../Template\");\n\nvar HelperRuntimeModule = require(\"./HelperRuntimeModule\");\n/** @typedef {import(\"../Chunk\")} Chunk */\n\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/**\n * @typedef {Object} LoadScriptCompilationHooks\n * @property {SyncWaterfallHook<[string, Chunk]>} createScript\n */\n\n/** @type {WeakMap<Compilation, LoadScriptCompilationHooks>} */\n\n\nvar compilationHooksMap = new WeakMap();\n\nvar LoadScriptRuntimeModule = /*#__PURE__*/function (_HelperRuntimeModule) {\n  _inherits(LoadScriptRuntimeModule, _HelperRuntimeModule);\n\n  var _super = _createSuper(LoadScriptRuntimeModule);\n\n  /**\n   * @param {boolean=} withCreateScriptUrl use create script url for trusted types\n   */\n  function LoadScriptRuntimeModule(withCreateScriptUrl) {\n    var _this;\n\n    _classCallCheck(this, LoadScriptRuntimeModule);\n\n    _this = _super.call(this, \"load script\");\n    _this._withCreateScriptUrl = withCreateScriptUrl;\n    return _this;\n  }\n  /**\n   * @returns {string} runtime code\n   */\n\n\n  _createClass(LoadScriptRuntimeModule, [{\n    key: \"generate\",\n    value: function generate() {\n      var compilation = this.compilation;\n      var runtimeTemplate = compilation.runtimeTemplate,\n          outputOptions = compilation.outputOptions;\n      var scriptType = outputOptions.scriptType,\n          loadTimeout = outputOptions.chunkLoadTimeout,\n          crossOriginLoading = outputOptions.crossOriginLoading,\n          uniqueName = outputOptions.uniqueName,\n          charset = outputOptions.charset;\n      var fn = RuntimeGlobals.loadScript;\n\n      var _LoadScriptRuntimeMod = LoadScriptRuntimeModule.getCompilationHooks(compilation),\n          createScript = _LoadScriptRuntimeMod.createScript;\n\n      var code = Template.asString([\"script = document.createElement('script');\", scriptType ? \"script.type = \".concat(JSON.stringify(scriptType), \";\") : \"\", charset ? \"script.charset = 'utf-8';\" : \"\", \"script.timeout = \".concat(loadTimeout / 1000, \";\"), \"if (\".concat(RuntimeGlobals.scriptNonce, \") {\"), Template.indent(\"script.setAttribute(\\\"nonce\\\", \".concat(RuntimeGlobals.scriptNonce, \");\")), \"}\", uniqueName ? 'script.setAttribute(\"data-webpack\", dataWebpackPrefix + key);' : \"\", \"script.src = \".concat(this._withCreateScriptUrl ? \"\".concat(RuntimeGlobals.createScriptUrl, \"(url)\") : \"url\", \";\"), crossOriginLoading ? Template.asString([\"if (script.src.indexOf(window.location.origin + '/') !== 0) {\", Template.indent(\"script.crossOrigin = \".concat(JSON.stringify(crossOriginLoading), \";\")), \"}\"]) : \"\"]);\n      return Template.asString([\"var inProgress = {};\", uniqueName ? \"var dataWebpackPrefix = \".concat(JSON.stringify(uniqueName + \":\"), \";\") : \"// data-webpack is not used as build has no uniqueName\", \"// loadScript function to load a script via script tag\", \"\".concat(fn, \" = \").concat(runtimeTemplate.basicFunction(\"url, done, key, chunkId\", [\"if(inProgress[url]) { inProgress[url].push(done); return; }\", \"var script, needAttach;\", \"if(key !== undefined) {\", Template.indent(['var scripts = document.getElementsByTagName(\"script\");', \"for(var i = 0; i < scripts.length; i++) {\", Template.indent([\"var s = scripts[i];\", \"if(s.getAttribute(\\\"src\\\") == url\".concat(uniqueName ? ' || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key' : \"\", \") { script = s; break; }\")]), \"}\"]), \"}\", \"if(!script) {\", Template.indent([\"needAttach = true;\", createScript.call(code, this.chunk)]), \"}\", \"inProgress[url] = [done];\", \"var onScriptComplete = \" + runtimeTemplate.basicFunction(\"prev, event\", Template.asString([\"// avoid mem leaks in IE.\", \"script.onerror = script.onload = null;\", \"clearTimeout(timeout);\", \"var doneFns = inProgress[url];\", \"delete inProgress[url];\", \"script.parentNode && script.parentNode.removeChild(script);\", \"doneFns && doneFns.forEach(\".concat(runtimeTemplate.returningFunction(\"fn(event)\", \"fn\"), \");\"), \"if(prev) return prev(event);\"])), \";\", \"var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), \".concat(loadTimeout, \");\"), \"script.onerror = onScriptComplete.bind(null, script.onerror);\", \"script.onload = onScriptComplete.bind(null, script.onload);\", \"needAttach && document.head.appendChild(script);\"]), \";\")]);\n    }\n  }], [{\n    key: \"getCompilationHooks\",\n    value:\n    /**\n     * @param {Compilation} compilation the compilation\n     * @returns {LoadScriptCompilationHooks} hooks\n     */\n    function getCompilationHooks(compilation) {\n      if (!(compilation instanceof Compilation)) {\n        throw new TypeError(\"The 'compilation' argument must be an instance of Compilation\");\n      }\n\n      var hooks = compilationHooksMap.get(compilation);\n\n      if (hooks === undefined) {\n        hooks = {\n          createScript: new SyncWaterfallHook([\"source\", \"chunk\"])\n        };\n        compilationHooksMap.set(compilation, hooks);\n      }\n\n      return hooks;\n    }\n  }]);\n\n  return LoadScriptRuntimeModule;\n}(HelperRuntimeModule);\n\nmodule.exports = LoadScriptRuntimeModule;","map":{"version":3,"sources":["/home/john/tree-epidemic-sim-front-end/node_modules/webpack/lib/runtime/LoadScriptRuntimeModule.js"],"names":["require","SyncWaterfallHook","Compilation","RuntimeGlobals","Template","HelperRuntimeModule","compilationHooksMap","WeakMap","LoadScriptRuntimeModule","withCreateScriptUrl","_withCreateScriptUrl","compilation","runtimeTemplate","outputOptions","scriptType","loadTimeout","chunkLoadTimeout","crossOriginLoading","uniqueName","charset","fn","loadScript","getCompilationHooks","createScript","code","asString","JSON","stringify","scriptNonce","indent","createScriptUrl","basicFunction","call","chunk","returningFunction","TypeError","hooks","get","undefined","set","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n*/\n\n\"use strict\";\n\nconst { SyncWaterfallHook } = require(\"tapable\");\nconst Compilation = require(\"../Compilation\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst Template = require(\"../Template\");\nconst HelperRuntimeModule = require(\"./HelperRuntimeModule\");\n\n/** @typedef {import(\"../Chunk\")} Chunk */\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/**\n * @typedef {Object} LoadScriptCompilationHooks\n * @property {SyncWaterfallHook<[string, Chunk]>} createScript\n */\n\n/** @type {WeakMap<Compilation, LoadScriptCompilationHooks>} */\nconst compilationHooksMap = new WeakMap();\n\nclass LoadScriptRuntimeModule extends HelperRuntimeModule {\n\t/**\n\t * @param {Compilation} compilation the compilation\n\t * @returns {LoadScriptCompilationHooks} hooks\n\t */\n\tstatic getCompilationHooks(compilation) {\n\t\tif (!(compilation instanceof Compilation)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t\"The 'compilation' argument must be an instance of Compilation\"\n\t\t\t);\n\t\t}\n\t\tlet hooks = compilationHooksMap.get(compilation);\n\t\tif (hooks === undefined) {\n\t\t\thooks = {\n\t\t\t\tcreateScript: new SyncWaterfallHook([\"source\", \"chunk\"])\n\t\t\t};\n\t\t\tcompilationHooksMap.set(compilation, hooks);\n\t\t}\n\t\treturn hooks;\n\t}\n\n\t/**\n\t * @param {boolean=} withCreateScriptUrl use create script url for trusted types\n\t */\n\tconstructor(withCreateScriptUrl) {\n\t\tsuper(\"load script\");\n\t\tthis._withCreateScriptUrl = withCreateScriptUrl;\n\t}\n\n\t/**\n\t * @returns {string} runtime code\n\t */\n\tgenerate() {\n\t\tconst { compilation } = this;\n\t\tconst { runtimeTemplate, outputOptions } = compilation;\n\t\tconst {\n\t\t\tscriptType,\n\t\t\tchunkLoadTimeout: loadTimeout,\n\t\t\tcrossOriginLoading,\n\t\t\tuniqueName,\n\t\t\tcharset\n\t\t} = outputOptions;\n\t\tconst fn = RuntimeGlobals.loadScript;\n\n\t\tconst { createScript } =\n\t\t\tLoadScriptRuntimeModule.getCompilationHooks(compilation);\n\n\t\tconst code = Template.asString([\n\t\t\t\"script = document.createElement('script');\",\n\t\t\tscriptType ? `script.type = ${JSON.stringify(scriptType)};` : \"\",\n\t\t\tcharset ? \"script.charset = 'utf-8';\" : \"\",\n\t\t\t`script.timeout = ${loadTimeout / 1000};`,\n\t\t\t`if (${RuntimeGlobals.scriptNonce}) {`,\n\t\t\tTemplate.indent(\n\t\t\t\t`script.setAttribute(\"nonce\", ${RuntimeGlobals.scriptNonce});`\n\t\t\t),\n\t\t\t\"}\",\n\t\t\tuniqueName\n\t\t\t\t? 'script.setAttribute(\"data-webpack\", dataWebpackPrefix + key);'\n\t\t\t\t: \"\",\n\t\t\t`script.src = ${\n\t\t\t\tthis._withCreateScriptUrl\n\t\t\t\t\t? `${RuntimeGlobals.createScriptUrl}(url)`\n\t\t\t\t\t: \"url\"\n\t\t\t};`,\n\t\t\tcrossOriginLoading\n\t\t\t\t? Template.asString([\n\t\t\t\t\t\t\"if (script.src.indexOf(window.location.origin + '/') !== 0) {\",\n\t\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t\t`script.crossOrigin = ${JSON.stringify(crossOriginLoading)};`\n\t\t\t\t\t\t),\n\t\t\t\t\t\t\"}\"\n\t\t\t\t  ])\n\t\t\t\t: \"\"\n\t\t]);\n\n\t\treturn Template.asString([\n\t\t\t\"var inProgress = {};\",\n\t\t\tuniqueName\n\t\t\t\t? `var dataWebpackPrefix = ${JSON.stringify(uniqueName + \":\")};`\n\t\t\t\t: \"// data-webpack is not used as build has no uniqueName\",\n\t\t\t\"// loadScript function to load a script via script tag\",\n\t\t\t`${fn} = ${runtimeTemplate.basicFunction(\"url, done, key, chunkId\", [\n\t\t\t\t\"if(inProgress[url]) { inProgress[url].push(done); return; }\",\n\t\t\t\t\"var script, needAttach;\",\n\t\t\t\t\"if(key !== undefined) {\",\n\t\t\t\tTemplate.indent([\n\t\t\t\t\t'var scripts = document.getElementsByTagName(\"script\");',\n\t\t\t\t\t\"for(var i = 0; i < scripts.length; i++) {\",\n\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\"var s = scripts[i];\",\n\t\t\t\t\t\t`if(s.getAttribute(\"src\") == url${\n\t\t\t\t\t\t\tuniqueName\n\t\t\t\t\t\t\t\t? ' || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key'\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t}) { script = s; break; }`\n\t\t\t\t\t]),\n\t\t\t\t\t\"}\"\n\t\t\t\t]),\n\t\t\t\t\"}\",\n\t\t\t\t\"if(!script) {\",\n\t\t\t\tTemplate.indent([\n\t\t\t\t\t\"needAttach = true;\",\n\t\t\t\t\tcreateScript.call(code, this.chunk)\n\t\t\t\t]),\n\t\t\t\t\"}\",\n\t\t\t\t\"inProgress[url] = [done];\",\n\t\t\t\t\"var onScriptComplete = \" +\n\t\t\t\t\truntimeTemplate.basicFunction(\n\t\t\t\t\t\t\"prev, event\",\n\t\t\t\t\t\tTemplate.asString([\n\t\t\t\t\t\t\t\"// avoid mem leaks in IE.\",\n\t\t\t\t\t\t\t\"script.onerror = script.onload = null;\",\n\t\t\t\t\t\t\t\"clearTimeout(timeout);\",\n\t\t\t\t\t\t\t\"var doneFns = inProgress[url];\",\n\t\t\t\t\t\t\t\"delete inProgress[url];\",\n\t\t\t\t\t\t\t\"script.parentNode && script.parentNode.removeChild(script);\",\n\t\t\t\t\t\t\t`doneFns && doneFns.forEach(${runtimeTemplate.returningFunction(\n\t\t\t\t\t\t\t\t\"fn(event)\",\n\t\t\t\t\t\t\t\t\"fn\"\n\t\t\t\t\t\t\t)});`,\n\t\t\t\t\t\t\t\"if(prev) return prev(event);\"\n\t\t\t\t\t\t])\n\t\t\t\t\t),\n\t\t\t\t\";\",\n\t\t\t\t`var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), ${loadTimeout});`,\n\t\t\t\t\"script.onerror = onScriptComplete.bind(null, script.onerror);\",\n\t\t\t\t\"script.onload = onScriptComplete.bind(null, script.onload);\",\n\t\t\t\t\"needAttach && document.head.appendChild(script);\"\n\t\t\t])};`\n\t\t]);\n\t}\n}\n\nmodule.exports = LoadScriptRuntimeModule;\n"]},"metadata":{},"sourceType":"script"}