{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Florent Cailhol @ooflorent\n*/\n\"use strict\";\n\nvar _slicedToArray = require(\"/home/john/tree-epidemic-sim-front-end/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\n\nvar _classCallCheck = require(\"/home/john/tree-epidemic-sim-front-end/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/home/john/tree-epidemic-sim-front-end/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _require = require(\"../util/comparators\"),\n    compareModulesByPreOrderIndexOrIdentifier = _require.compareModulesByPreOrderIndexOrIdentifier;\n\nvar _require2 = require(\"./IdHelpers\"),\n    getUsedModuleIdsAndModules = _require2.getUsedModuleIdsAndModules,\n    getFullModuleName = _require2.getFullModuleName,\n    assignDeterministicIds = _require2.assignDeterministicIds;\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/** @typedef {import(\"../Module\")} Module */\n\n\nvar DeterministicModuleIdsPlugin = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options options\n   * @param {string=} options.context context relative to which module identifiers are computed\n   * @param {function(Module): boolean=} options.test selector function for modules\n   * @param {number=} options.maxLength maximum id length in digits (used as starting point)\n   * @param {number=} options.salt hash salt for ids\n   * @param {boolean=} options.fixedLength do not increase the maxLength to find an optimal id space size\n   * @param {boolean=} options.failOnConflict throw an error when id conflicts occur (instead of rehashing)\n   */\n  function DeterministicModuleIdsPlugin() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, DeterministicModuleIdsPlugin);\n\n    this.options = options;\n  }\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n\n\n  _createClass(DeterministicModuleIdsPlugin, [{\n    key: \"apply\",\n    value: function apply(compiler) {\n      var _this = this;\n\n      compiler.hooks.compilation.tap(\"DeterministicModuleIdsPlugin\", function (compilation) {\n        compilation.hooks.moduleIds.tap(\"DeterministicModuleIdsPlugin\", function () {\n          var chunkGraph = compilation.chunkGraph;\n          var context = _this.options.context ? _this.options.context : compiler.context;\n          var maxLength = _this.options.maxLength || 3;\n          var failOnConflict = _this.options.failOnConflict || false;\n          var fixedLength = _this.options.fixedLength || false;\n          var salt = _this.options.salt || 0;\n          var conflicts = 0;\n\n          var _getUsedModuleIdsAndM = getUsedModuleIdsAndModules(compilation, _this.options.test),\n              _getUsedModuleIdsAndM2 = _slicedToArray(_getUsedModuleIdsAndM, 2),\n              usedIds = _getUsedModuleIdsAndM2[0],\n              modules = _getUsedModuleIdsAndM2[1];\n\n          assignDeterministicIds(modules, function (module) {\n            return getFullModuleName(module, context, compiler.root);\n          }, failOnConflict ? function () {\n            return 0;\n          } : compareModulesByPreOrderIndexOrIdentifier(compilation.moduleGraph), function (module, id) {\n            var size = usedIds.size;\n            usedIds.add(\"\".concat(id));\n\n            if (size === usedIds.size) {\n              conflicts++;\n              return false;\n            }\n\n            chunkGraph.setModuleId(module, id);\n            return true;\n          }, [Math.pow(10, maxLength)], fixedLength ? 0 : 10, usedIds.size, salt);\n          if (failOnConflict && conflicts) throw new Error(\"Assigning deterministic module ids has lead to \".concat(conflicts, \" conflict\").concat(conflicts > 1 ? \"s\" : \"\", \".\\nIncrease the 'maxLength' to increase the id space and make conflicts less likely (recommended when there are many conflicts or application is expected to grow), or add an 'salt' number to try another hash starting value in the same id space (recommended when there is only a single conflict).\"));\n        });\n      });\n    }\n  }]);\n\n  return DeterministicModuleIdsPlugin;\n}();\n\nmodule.exports = DeterministicModuleIdsPlugin;","map":{"version":3,"sources":["/home/john/tree-epidemic-sim-front-end/node_modules/webpack/lib/ids/DeterministicModuleIdsPlugin.js"],"names":["require","compareModulesByPreOrderIndexOrIdentifier","getUsedModuleIdsAndModules","getFullModuleName","assignDeterministicIds","DeterministicModuleIdsPlugin","options","compiler","hooks","compilation","tap","moduleIds","chunkGraph","context","maxLength","failOnConflict","fixedLength","salt","conflicts","test","usedIds","modules","module","root","moduleGraph","id","size","add","setModuleId","Math","pow","Error","exports"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;;;;;;;AAEA,eAEIA,OAAO,CAAC,qBAAD,CAFX;AAAA,IACCC,yCADD,YACCA,yCADD;;AAGA,gBAIID,OAAO,CAAC,aAAD,CAJX;AAAA,IACCE,0BADD,aACCA,0BADD;AAAA,IAECC,iBAFD,aAECA,iBAFD;AAAA,IAGCC,sBAHD,aAGCA,sBAHD;AAMA;;AACA;;;IAEMC,4B;AACL;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACC,0CAA0B;AAAA,QAAdC,OAAc,uEAAJ,EAAI;;AAAA;;AACzB,SAAKA,OAAL,GAAeA,OAAf;AACA;AAED;AACD;AACA;AACA;AACA;;;;;WACC,eAAMC,QAAN,EAAgB;AAAA;;AACfA,MAAAA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CACC,8BADD,EAEC,UAAAD,WAAW,EAAI;AACdA,QAAAA,WAAW,CAACD,KAAZ,CAAkBG,SAAlB,CAA4BD,GAA5B,CAAgC,8BAAhC,EAAgE,YAAM;AACrE,cAAME,UAAU,GAAGH,WAAW,CAACG,UAA/B;AACA,cAAMC,OAAO,GAAG,KAAI,CAACP,OAAL,CAAaO,OAAb,GACb,KAAI,CAACP,OAAL,CAAaO,OADA,GAEbN,QAAQ,CAACM,OAFZ;AAGA,cAAMC,SAAS,GAAG,KAAI,CAACR,OAAL,CAAaQ,SAAb,IAA0B,CAA5C;AACA,cAAMC,cAAc,GAAG,KAAI,CAACT,OAAL,CAAaS,cAAb,IAA+B,KAAtD;AACA,cAAMC,WAAW,GAAG,KAAI,CAACV,OAAL,CAAaU,WAAb,IAA4B,KAAhD;AACA,cAAMC,IAAI,GAAG,KAAI,CAACX,OAAL,CAAaW,IAAb,IAAqB,CAAlC;AACA,cAAIC,SAAS,GAAG,CAAhB;;AAEA,sCAA2BhB,0BAA0B,CACpDO,WADoD,EAEpD,KAAI,CAACH,OAAL,CAAaa,IAFuC,CAArD;AAAA;AAAA,cAAOC,OAAP;AAAA,cAAgBC,OAAhB;;AAIAjB,UAAAA,sBAAsB,CACrBiB,OADqB,EAErB,UAAAC,MAAM;AAAA,mBAAInB,iBAAiB,CAACmB,MAAD,EAAST,OAAT,EAAkBN,QAAQ,CAACgB,IAA3B,CAArB;AAAA,WAFe,EAGrBR,cAAc,GACX;AAAA,mBAAM,CAAN;AAAA,WADW,GAEXd,yCAAyC,CACzCQ,WAAW,CAACe,WAD6B,CALvB,EAQrB,UAACF,MAAD,EAASG,EAAT,EAAgB;AACf,gBAAMC,IAAI,GAAGN,OAAO,CAACM,IAArB;AACAN,YAAAA,OAAO,CAACO,GAAR,WAAeF,EAAf;;AACA,gBAAIC,IAAI,KAAKN,OAAO,CAACM,IAArB,EAA2B;AAC1BR,cAAAA,SAAS;AACT,qBAAO,KAAP;AACA;;AACDN,YAAAA,UAAU,CAACgB,WAAX,CAAuBN,MAAvB,EAA+BG,EAA/B;AACA,mBAAO,IAAP;AACA,WAjBoB,EAkBrB,CAACI,IAAI,CAACC,GAAL,CAAS,EAAT,EAAahB,SAAb,CAAD,CAlBqB,EAmBrBE,WAAW,GAAG,CAAH,GAAO,EAnBG,EAoBrBI,OAAO,CAACM,IApBa,EAqBrBT,IArBqB,CAAtB;AAuBA,cAAIF,cAAc,IAAIG,SAAtB,EACC,MAAM,IAAIa,KAAJ,0DAC6Cb,SAD7C,sBAEJA,SAAS,GAAG,CAAZ,GAAgB,GAAhB,GAAsB,EAFlB,6SAAN;AAKD,SA5CD;AA6CA,OAhDF;AAkDA;;;;;;AAGFI,MAAM,CAACU,OAAP,GAAiB3B,4BAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Florent Cailhol @ooflorent\n*/\n\n\"use strict\";\n\nconst {\n\tcompareModulesByPreOrderIndexOrIdentifier\n} = require(\"../util/comparators\");\nconst {\n\tgetUsedModuleIdsAndModules,\n\tgetFullModuleName,\n\tassignDeterministicIds\n} = require(\"./IdHelpers\");\n\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Module\")} Module */\n\nclass DeterministicModuleIdsPlugin {\n\t/**\n\t * @param {Object} options options\n\t * @param {string=} options.context context relative to which module identifiers are computed\n\t * @param {function(Module): boolean=} options.test selector function for modules\n\t * @param {number=} options.maxLength maximum id length in digits (used as starting point)\n\t * @param {number=} options.salt hash salt for ids\n\t * @param {boolean=} options.fixedLength do not increase the maxLength to find an optimal id space size\n\t * @param {boolean=} options.failOnConflict throw an error when id conflicts occur (instead of rehashing)\n\t */\n\tconstructor(options = {}) {\n\t\tthis.options = options;\n\t}\n\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"DeterministicModuleIdsPlugin\",\n\t\t\tcompilation => {\n\t\t\t\tcompilation.hooks.moduleIds.tap(\"DeterministicModuleIdsPlugin\", () => {\n\t\t\t\t\tconst chunkGraph = compilation.chunkGraph;\n\t\t\t\t\tconst context = this.options.context\n\t\t\t\t\t\t? this.options.context\n\t\t\t\t\t\t: compiler.context;\n\t\t\t\t\tconst maxLength = this.options.maxLength || 3;\n\t\t\t\t\tconst failOnConflict = this.options.failOnConflict || false;\n\t\t\t\t\tconst fixedLength = this.options.fixedLength || false;\n\t\t\t\t\tconst salt = this.options.salt || 0;\n\t\t\t\t\tlet conflicts = 0;\n\n\t\t\t\t\tconst [usedIds, modules] = getUsedModuleIdsAndModules(\n\t\t\t\t\t\tcompilation,\n\t\t\t\t\t\tthis.options.test\n\t\t\t\t\t);\n\t\t\t\t\tassignDeterministicIds(\n\t\t\t\t\t\tmodules,\n\t\t\t\t\t\tmodule => getFullModuleName(module, context, compiler.root),\n\t\t\t\t\t\tfailOnConflict\n\t\t\t\t\t\t\t? () => 0\n\t\t\t\t\t\t\t: compareModulesByPreOrderIndexOrIdentifier(\n\t\t\t\t\t\t\t\t\tcompilation.moduleGraph\n\t\t\t\t\t\t\t  ),\n\t\t\t\t\t\t(module, id) => {\n\t\t\t\t\t\t\tconst size = usedIds.size;\n\t\t\t\t\t\t\tusedIds.add(`${id}`);\n\t\t\t\t\t\t\tif (size === usedIds.size) {\n\t\t\t\t\t\t\t\tconflicts++;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchunkGraph.setModuleId(module, id);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[Math.pow(10, maxLength)],\n\t\t\t\t\t\tfixedLength ? 0 : 10,\n\t\t\t\t\t\tusedIds.size,\n\t\t\t\t\t\tsalt\n\t\t\t\t\t);\n\t\t\t\t\tif (failOnConflict && conflicts)\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Assigning deterministic module ids has lead to ${conflicts} conflict${\n\t\t\t\t\t\t\t\tconflicts > 1 ? \"s\" : \"\"\n\t\t\t\t\t\t\t}.\\nIncrease the 'maxLength' to increase the id space and make conflicts less likely (recommended when there are many conflicts or application is expected to grow), or add an 'salt' number to try another hash starting value in the same id space (recommended when there is only a single conflict).`\n\t\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = DeterministicModuleIdsPlugin;\n"]},"metadata":{},"sourceType":"script"}